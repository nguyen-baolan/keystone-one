{{/*
  Featured Work Section
  
  Displays selected case studies in a swiper (like testimonials).
  Content comes from content/sections/featured-work.md
  
  Front matter:
    enable: true/false
    title: "Section title"
    description: "Optional description"
    featured_cases:
      - "case-slug"
      - "parent-case/deep-dive-slug"
*/}}

{{ with site.GetPage "sections/featured-work" }}
  {{ if .Params.enable }}
    <section class="section">
      <div class="container">
        <div class="row">
          <div class="md:col-10 lg:col-8 xl:col-6 mx-auto mb-12 text-center">
            <h2 class="mb-4">
              {{ .Title | markdownify }}
            </h2>
            {{ with .Params.description }}
              <p>
                {{ . | markdownify }}
              </p>
            {{ end }}
          </div>
          <div class="col-12">
            <div class="swiper featured-work-slider">
              <div class="swiper-wrapper">
                {{ range .Params.featured_cases }}
                  {{ $ref := . }}
                  {{ $page := site.GetPage (printf "work/%s" $ref) }}
                  
                  {{ if $page }}
                    <div class="swiper-slide">
                      {{ partial "components/work-card-compact" $page }}
                    </div>
                  {{ end }}
                {{ end }}
              </div>
              <div class="featured-work-slider-pagination mt-9 flex items-center justify-center text-center"></div>
            </div>
          </div>
        </div>
      </div>
    </section>
  {{ end }}
{{ end }}