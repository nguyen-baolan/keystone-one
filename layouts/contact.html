{{ define "main" }}
  {{ partial "page-header" . }}

  <section class="section-sm">
    <div class="container">
      <div class="row">
        <div class="md:col-10 lg:col-6 mx-auto">
          {{/*
            Contact form (GitHub Pages compatible)

            Uses Formspree:
            - Create a form at https://formspree.io and copy your endpoint, e.g. https://formspree.io/f/abcdwxyz
            - Recommended: set it via GitHub Actions secret (exported as HUGO_FORMSPREE_ACTION).
            - Local fallback: set it in config as params.contact_form_action.

            Notes:
            - We keep the form markup/styling, but remove Netlify-only attributes.
            - For basic anti-spam, consider enabling Formspree's spam protection in their dashboard.
          */}}
          {{/* Prefer env var (CI) so the endpoint isn't hardcoded in the repo.
              Hugo's security policy in this repo only allows HUGO_* env vars by default. */}}
          {{ $action := (getenv "HUGO_FORMSPREE_ACTION") | default site.Params.contact_form_action | default "#" }}
          <form action="{{ $action }}" method="POST">

            <div class="mb-6">
              <label for="name" class="form-label">
                Your name <span class="text-red-500">*</span>
              </label>
              <input
                id="name"
                name="name"
                class="form-input"
                placeholder="Your name"
                type="text"
                required />
            </div>

            <div class="mb-6">
              <label for="email" class="form-label">
                Your email <span class="text-red-500">*</span>
              </label>
              <input
                id="email"
                name="email"
                class="form-input"
                placeholder="your-email@email.com"
                type="email"
                required />
            </div>

            <div class="mb-6">
              <label for="message" class="form-label">
                Your inquiry <span class="text-red-500">*</span>
              </label>
              <textarea
                id="message"
                name="message"
                class="form-input"
                placeholder="Please leave your message here"
                rows="8"
                required></textarea>
            </div>

            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        </div>
      </div>
    </div>
  </section>

  {{/* Keep optional Google map behavior as per existing template */}}
  {{ with site.Params.google_map }}
    {{ if .enable }}
      <div
        id="map"
        style="height: 400px;"
        data-latitude="{{ .map_latitude }}"
        data-longitude="{{ .map_longitude }}"
        data-marker="{{ .map_marker | relURL }}"
        data-marker-name="{{ site.Title }}"></div>
    {{ end }}
  {{ end }}

  {{ if site.Params.google_map.enable }}
    {{ $gmap := resources.Get "plugins/maps/google-map.js" }}
    <script defer src="{{ $gmap.RelPermalink }}"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key={{ site.Params.google_map.map_api_key }}&libraries=places"></script>
  {{ end }}

{{ end }}
